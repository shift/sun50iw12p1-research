# HY300 Minimal Kernel Configuration
# Based on ARM64 defconfig with Sunxi-specific additions

CONFIG_ARM64=y
CONFIG_ARCH_SUNXI=y
CONFIG_MACH_SUN50I=y

# Device Tree
CONFIG_OF=y
CONFIG_OF_FLATTREE=y
CONFIG_OF_OVERLAY=y
CONFIG_OF_CONFIGFS=y

# Boot and storage
CONFIG_MMC=y
CONFIG_MMC_SUNXI=y
CONFIG_MMC_BLOCK=y
CONFIG_EXT4_FS=y
CONFIG_VFAT_FS=y
CONFIG_FAT_FS=y

# Serial console
CONFIG_SERIAL_8250=y
CONFIG_SERIAL_8250_CONSOLE=y
CONFIG_SERIAL_8250_DW=y
CONFIG_SERIAL_OF_PLATFORM=y

# GPIO and pinctrl
CONFIG_PINCTRL=y
CONFIG_PINCTRL_SUNXI=y
CONFIG_GPIOLIB=y
CONFIG_GPIO_SYSFS=y

# Clock framework
CONFIG_COMMON_CLK=y
CONFIG_CLK_SUNXI=y

# Basic file systems
CONFIG_PROC_FS=y
CONFIG_SYSFS=y
CONFIG_TMPFS=y
CONFIG_DEVTMPFS=y
CONFIG_DEVTMPFS_MOUNT=y

# Network
CONFIG_NET=y
CONFIG_PACKET=y
CONFIG_UNIX=y
CONFIG_INET=y

# Media support
CONFIG_MEDIA_SUPPORT=y
CONFIG_MEDIA_CAMERA_SUPPORT=y
CONFIG_MEDIA_ANALOG_TV_SUPPORT=y
CONFIG_MEDIA_PLATFORM_SUPPORT=y
CONFIG_MEDIA_PLATFORM_DRIVERS=y
CONFIG_V4L_PLATFORM_DRIVERS=y
CONFIG_VIDEO_DEV=y
CONFIG_VIDEO_V4L2=y
CONFIG_VIDEOBUF2_CORE=y
CONFIG_VIDEOBUF2_DMA_CONTIG=y
CONFIG_V4L2_MEM2MEM_DEV=y

# Reset controller support
CONFIG_RESET_CONTROLLER=y

# HY300 Custom drivers (as modules)
CONFIG_SUNXI_NSI=m
CONFIG_SUNXI_MIPSLOADER=m
CONFIG_SUNXI_TVTOP=m
CONFIG_SUNXI_CPU_COMM=m
CONFIG_HY300_KEYSTONE_MOTOR=m
CONFIG_VIDEO_SUNXI_TVCAP=m

# CRC32 support (required by NSI drivers)
CONFIG_CRC32=y

# Additional media platform configs to prevent prompts
CONFIG_SDR_PLATFORM_DRIVERS=y
CONFIG_DVB_PLATFORM_DRIVERS=n
CONFIG_V4L_MEM2MEM_DRIVERS=y